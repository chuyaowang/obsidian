# 4.5 VU B4TM Weighted Metrics for NCC Study

[0. VU B4TM](Machine%20Learning/VU%20Bioinformatics%20for%20Translational%20Medicine/0.%20VU%20B4TM.md)
#paper 
[Weighted metrics are required when evaluating the performance of prediction models in nested case–control studies](Biology/Seminars/Weighted%20metrics%20are%20required%20when%20evaluating%20the%20performance%20of%20prediction%20models%20in%20nested%20case–control%20studies.md)

> Dominico Belemo
> Skyline DX

## Skyline DX

- Dutch company, 12 years
- Rotterdam, NL
- San Diego, US
- Molecular diagnostic company
- Research focused; partner with academic institution and big pharma
- Diagnosis, prognosis
- Have a bioinformatics group; PhD. needed
	- AI drug development

## Design a test

- Design a test for intended use population / target population
- Metastasis of cutaneous squamous cell carcinoma (CSCC)
- Sampling from the entire population of CSCC patients
	- problem: event has low probability, so low chance to sample an event
	- this leads to imbalanced classes

### Handling class imbalance: synthetic data

- Over sample metastasis patients, under-sample non-metastasis patients

### Nested case-control dataset

- Sample from population for rare events

1. Identify cases in population: since the case is rare, can identify all of them
2. Match controls to cases
	1. Metastasis happen in time
	2. Someone with metastasis after 2 years of diagnosis matched to someone without metastasis 2 years later
3. Measure variable of interest
4. Build model
5. NCC performance metrics: check if model still applies to general population

### Challenges: 1

### Challenges: 2

- Match patients based on follow up time
- The follow up time can be unrelated to the condition (gender, personal preference)
- This introduces bias into the dataset
- The sample becomes unrepresentative of the population

## How to account for the bias

- Key idea: adding sampling weight

### Compute sampling probability for each control -> corresponding weight

- The weights readjust the bias: weight $\propto$ inverse probability of being sampled
	- low prob -> high weight
- Need to calculate that probability
	- Need to know something about the population: a link between population and sample
	- Where the _nested_ part comes from
- Count the number of qualifying cases for a control 
	- The prob of not being selected = 1- prob of being selected
	- get prob of control # being selected at least once
- Calculate weight as inverse

## Real world illustration: study cohort

- Verify this bias adjusting approach works

### Rotterdam study

- C index
- Still have over and under estimates, but better than no weights

## Internships

- at skyline dx
- email