# Image Processing

[0. VU QSCB](Biology/VU%20Quantitative%20Single%20Cell%20Biology/0.%20VU%20QSCB.md)
> Philipp

## Basic workflow

- Segmentation
	- pixel wise
	- instance segmentation: group into objects
- Tracking: group instances across frames
- Data extraction

## Put things into perspective

a table


## Collecting image data

[8. VU QSCB Basic Fluorescence Microscopy](Biology/VU%20Quantitative%20Single%20Cell%20Biology/8.%20VU%20QSCB%20Basic%20Fluorescence%20Microscopy.md)

- Generates a matrix of photon counts
- (row, column) describes the address of a pixel.

### Note on pixel values

- 8 bit: values go from 0 to 2^8 -1 = 255  
- 16 bit: values go from 0 to 2^16 -1 = 65535
- watch out for numerical overflow and rounding decimals to integers

## Image histogram

- Histogram of pixel intensities

## Mapping values

- map pixel values to colors
- color map: different schema to map numbers to colors
	- perceptually uniform sequential colormaps: no gradient
	- sequential colormaps: has gradient
	- diverging colormaps: gradient to two sides
	- qualitative colormaps: not sequential

### Where is Mario

- Given what we know about this image, we can say that any pixel with intensity > 0 is a Mario pixel
- This is called classification by thresholding
- On brightfield images, thresholding will generally not work
	- Some pixels have the same intensity, but their surroundings may be quite different

## Convolutions

- Explore relationships between pixels
- Convolution: take operation of a range of pixels
- Kernel defines the range and the weight for each pixel
- Can be 2D, 3D, more D
- Common kernels in image processing: [wikipedia](https://en.wikipedia.org/wiki/Kernel_(image_processing))
- Convolution for pattern detection: shape of kernel matches the pattern being matched

## Getting pixels to express their context

- Stack a number of convolution results (x x y x n)
- Along n dimension: feature vector
- Label: object, background, edge
- Train classifier: [Random Forest](Machine%20Learning/VU%20Biosystems%20Data%20Analysis/9.%20VU%20BDA%20Random%20Forest.md) to classify pixels

### Convolutional neural network

- [3. VU DL Convolutional Network](Machine%20Learning/VU%20Deep%20Learning/3.%20VU%20DL%20Convolutional%20Network.md)
- Run randomized kernels
- Use loss function to update kernels
- Tells if there is a cat but not where is the cat

### ResNet

- Encoder decoder structure
	- latent space contains low dimension projection of data
- Skip connection to maintain resolution
- Raw image input, class prediction image output

## CNN in action

### Classification

- Background
- Border
- mothers
- buds

### Which instances belong to the same cell

- Which mother and buds come from the same cell
- The watershed algorithm

## Tracking

- Retain pixel identities across frames
- Many different algorithms

## Fluorescence data

- For each pixel, get its segmentation label. 
- Then get fluorescence value for each pixel.
- Note that fluorescence distribution is not always homogeneous. More sophistication is needed if we want to extract this information
	- ex. fluorescence intensity correspond to ribosome distribution in dividing E. Coli.